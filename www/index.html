<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Enchanted Square</title>


    <!--device ready codes-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.css" />
    <script type="text/javascript" src="jquery.mobile-1.4.2/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.js"></script>


	
<!--Game Logic (below)-->

<script type="text/javascript">

function initArray() {
this.length = initArray.arguments.length
for (var i = 0; i < this.length; i++)
this[i+1] = initArray.arguments[i]
}
var pos = new initArray(9,9,9,9,9,9,9,9,9);
var nummoves= 0;
function random() {
today = new Date();
num = today.getTime();
num = Math.round(Math.abs(Math.sin (num)*1000000)) % 9;
return num;
}
function display(pos) {
for (var i=0; i<9; i++)  {
document.forms[0].elements[i].value = pos[i];
}
document.forms[0].moves.value= nummoves;
win();
}
function move(num) {
if (num < 8 && pos[num+1]==0) {
pos[num+1]= pos[num];
pos[num]= 0;
nummoves++;
}
else if (num > 0 && pos[num-1]==0) {
pos[num-1]= pos[num];
pos[num]= 0;
nummoves++;
} 
else if (num > 2 && pos[num-3]==0) {
pos[num-3]= pos[num];
pos[num]= 0;
nummoves++;
}
else if (num < 6 && pos[num+3]==0 ) {
pos[num+3]= pos[num];
pos[num]= 0;
nummoves++;
}
display(pos);
}
function win() {     
if (pos[0]== 1 & pos[1]== 2 & pos[2]== 3 & pos[3]== 4 & 
pos[4]== 5 & pos[5]== 6 & pos[6]== 7 & pos[7]== 8 & pos[8]== 0) {
if (confirm('You did it! Do you want to restart?')) newgame();
   }
}
function newgame() {
var x=1;
for (var i=0; i<9; i++) {
pos[i]=9;
}
for (var i=0; i<9;i++) {
randomnum=random();
if (randomnum==9) randomnum=8;
x=1;
for (var j=0; j<9; j++)  {
if (j==i)
continue;
if (randomnum==pos[j]) {
x=0;
break;
   }
}
if (x==0) {
i--;
continue;
}
pos[i]=randomnum;
}
nummoves=0;
display(pos);   
}   

</script>
<!--Game Logic (above)-->

</head>

<body onLoad="window.newgame()">

<div data-role="page">

<!--PANEL-->
<div data-role="panel" id="myPanel"> 
    <h3>Instructions</h3>
    <p>Shift the numbers in order so that they read 1 to 8. 
Click on any number next to 0 and they will switch places. Treat 0 as the "empty" place.</p>
<h4>Goal</h4>
<p><img src="img/winning_formula.png" width="85%"></p>

</div> 



<!--Header-->
  <div data-role="header">
    
    <h4>Game</h4>
    <a href="#myPanel" class="ui-btn ui-btn-left ui-icon-bars ui-btn-icon-left">INFO</a>
    
    <div onClick="window.newgame()"><a href="#" class="ui-btn ui-btn-right ui-icon-star ui-btn-icon-left">RESTART</a></div>

  </div>

<!--Main Contents-->
  <div data-role="main" class="ui-content">
    <form>
       <table border="0">
    <tr>

    <div class="ui-grid-b">
    	<div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:60px" onclick="">
    	<input value="1" onClick="window.move(0)" readonly="readonly">
    	</div>
    </div>
    	<div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:60px">
    		<input value=" 2 " onClick="window.move(1)" readonly="readonly">
    	</div>
    </div>
    <div class="ui-block-c"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 3 " onClick="window.move(2)" readonly="readonly">
    	</div>
    </div>
    <div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 4 " onClick="window.move(3)" readonly="readonly">
    </div>
    </div>
    <div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 5 " onClick="window.move(4)" readonly="readonly">
    	</div>
    </div>
    <div class="ui-block-c"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 6 " onClick="window.move(5)" readonly="readonly">
    	</div>
    </div>
    <div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 7 " onClick="window.move(6)" readonly="readonly">
    	</div>
    </div>
    <div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:60px">
    	<input value=" 8 " onClick="window.move(7)" readonly="readonly">
    </div></div>
    <div class="ui-block-c"><div class="ui-bar ui-bar-a" style="height:60px">
    	 <input value=" 0 " onClick="window.move(8)" readonly="readonly">
    </div></div>
</div><!-- /grid-c -->


    </tr>
    <tr>
    	<td>
    		<b>Moves made:</b>
        </td>
        <td>
    		<input name="moves" size=5 value="0">
    	</td>
    </tr>
    </table>

    </form>
    
    
  </div>

<!--FOOTER-->
<!--
  <div data-role="footer">
    
</div>-->
    
    
  </div>
</div>




</body>
</html>
